!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).EventBus=n()}(this,function(){"use strict";function o(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return new(function(){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.listener=new Map(e)}var e,t,i;return e=n,(t=[{key:"on",value:function(e,n,t){var i=2<arguments.length&&void 0!==t?t:"default";"function"==typeof n&&(this.listener.has(e)||this.listener.set(e,[]),this.listener.get(e).push({fn:n,group:i}))}},{key:"once",value:function(n,t,e){var i,o=2<arguments.length&&void 0!==e?e:"default";"function"==typeof t&&(i=this).on(n,function e(){i.off(n,e,o),t.apply(i,arguments)},o)}},{key:"off",value:function(e,n,t){var i=this.listener.get(e)||[],o=null;e?n&&0<(o=t?i.filter(function(e){return e.group!==t||e.fn!==n}):i.filter(function(e){return e.fn!==n&&e.group!==n})).length?this.listener.set(e,o):this.listener.delete(e):this.listener.clear()}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,i=new Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];(this.listener.get(e)||[]).forEach(function(e){var n;(n=e.fn).call.apply(n,[t].concat(i))})}}])&&o(e.prototype,t),i&&o(e,i),n}())});
