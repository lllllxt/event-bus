!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).EventBus=n()}(this,function(){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return new(function(){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.listener=new Map(e)}var e,t,i;return e=n,(t=[{key:"on",value:function(e,n,t){var i=2<arguments.length&&void 0!==t?t:"default";"function"==typeof n&&(this.listener.has(e)||this.listener.set(e,[]),this.listener.get(e).push({fn:n,group:i}))}},{key:"once",value:function(n,t,e){var i,r=2<arguments.length&&void 0!==e?e:"default";"function"==typeof t&&(i=this).on(n,function e(){i.off(n,e,r),t.apply(i,arguments)},r)}},{key:"off",value:function(e,n,t){var i=this.listener.get(e)||[],r=null;e?n&&0<(r=t?i.filter(function(e){return e.group!==t||e.fn!==n}):i.filter(function(e){return e.fn!==n&&e.group!==n})).length?this.listener.set(e,r):this.listener.delete(e):this.listener.clear()}},{key:"removeGroup",value:function(i){var r=this;if(!i)return!1;this.listener.forEach(function(e,n){var t=e.filter(function(e){return e.group!==i});0<t.length?r.listener.set(n,t):r.listener.delete(n)})}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(this.listener.get(e)||[]).forEach(function(e){var n;(n=e.fn).call.apply(n,[t].concat(i))})}}])&&r(e.prototype,t),i&&r(e,i),n}())});
